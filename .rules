## Project Overview

`sqlc` is a high-performance Go ORM framework designed for modern applications. It leverages **Go Generics**, **Code Generation**, and the **Squirrel SQL Builder** to provide a type-safe, developer-friendly API with minimal runtime reflection overhead.

### Key Features
- **Generics-Driven:** Type-safe API using Go 1.18+ generics.
- **Code Generation:** Auto-generates model metadata and relation mapping via `sqlcli`.
- **Fluent Query API:** Chainable query builder for complex SQL construction.
- **JSON Support:** Deep integration for JSON field querying and updates (MySQL, PostgreSQL, SQLite).
- **Observability:** First-class support for `slog` logging and OpenTelemetry tracing.
- **Advanced DB Features:** Transactions, Lifecycle Hooks, Soft Deletes, Relations (Preload), and Upserts.

## Architecture

- **`Repository[T]`**: The primary entry point for CRUD operations on a model type `T`. It manages query building, hooks, and execution.
- **`Session`**: Manages the database connection, dialect-specific logic, and observability configurations (logging/tracing).
- **`Schema[T]`**: Metadata about a model (columns, primary keys, relations). This is typically generated by `sqlcli`.
- **`field` Package**: Provides type-safe field definitions and expressions (e.g., `Eq`, `Gt`, `In`, `IsNull`).
- **`clause` Package**: Contains the underlying SQL expression building blocks used by the query engine.
- **`cmd/sqlcli`**: A CLI tool that parses Go structs and generates the necessary metadata files in a `generated` sub-package.

## Building and Running

### Prerequisites
- Go 1.24+
- (Optional) SQLite/MySQL/Postgres for integration tests.

### Key Commands
- **Build the project:**
  ```bash
  go build ./...
  ```
- **Run the code generator (`sqlcli`):**
  ```bash
  go run ./cmd/sqlcli -i ./path/to/models
  ```
  Or if installed:
  ```bash
  sqlcli -i ./path/to/models
  ```
- **Run Tests:**
  ```bash
  go test ./...
  ```
- **Run Benchmarks:**
  ```bash
  go test -bench=. ./benchmarks/...
  ```

## Development Conventions

- **Code Generation:** Always run `sqlcli` after modifying model structs to update the generated metadata.
- **Error Handling:** Check and handle errors explicitly. Use `fmt.Errorf("context: %w", err)` to wrap errors.
- **Testing:** Prefer table-driven unit tests. Use `integration_test.go` and `setup_test.go` as references for database-backed tests.
- **Observability:** Ensure new database operations are instrumented with context-aware logging and tracing.
- **Single Responsibility:** Keep functions short and focused.
- **Idiomatic Go:** Follow standard Go formatting (`gofmt`) and naming conventions.

## Project Structure Highlights

- `field/`: Type-safe field types and operations.
- `clause/`: SQL expression components.
- `cmd/sqlcli/`: The code generation tool source.
- `examples/`: Practical usage examples for CRUD, relations, JSON, etc.
- `repository.go`: Core CRUD logic.
- `query.go`: Query builder implementation.
- `session.go`: Connection and session management.
- `schema.go`: Model metadata definitions.
- `dialect.go`: Database dialect abstractions.
