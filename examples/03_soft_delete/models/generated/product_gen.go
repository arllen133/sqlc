// Code generated by sqlcli. DO NOT EDIT.
// Version: v1.0.0
// Generated at: 2026-02-12T22:58:36+08:00

package generated

import (
	"github.com/arllen133/sqlc"
	"github.com/arllen133/sqlc/clause"
	"github.com/arllen133/sqlc/field"

	"github.com/arllen133/sqlc/examples/03_soft_delete/models"

	"time"
)

func init() {
	sqlc.RegisterSchema(&Product)
}

// Product Schema:
type productSchema struct {
	ID        field.Number[int64]
	Name      field.String
	DeletedAt field.Time
}

var _ sqlc.Schema[models.Product] = (*productSchema)(nil)

var Product = productSchema{
	ID:        field.Number[int64]{}.WithColumn("id"),
	Name:      field.String{}.WithColumn("name"),
	DeletedAt: field.Time{}.WithColumn("deleted_at"),
}

func (s *productSchema) TableName() string {
	return "products"
}

func (s *productSchema) SelectColumns() []string {
	return []string{
		"id",
		"name",
		"deleted_at",
	}
}

func (s *productSchema) InsertRow(m *models.Product) ([]string, []any) {
	var cols []string
	var vals []any
	// AutoIncrement PK: include only if explicitly set (non-zero)
	if m.ID != 0 {
		cols = append(cols, "id")
		vals = append(vals, m.ID)
	}
	cols = append(cols, "name")
	vals = append(vals, m.Name)
	cols = append(cols, "deleted_at")
	vals = append(vals, m.DeletedAt)
	return cols, vals
}

func (s *productSchema) UpdateMap(m *models.Product) map[string]any {
	res := make(map[string]any)
	res["name"] = m.Name
	res["deleted_at"] = m.DeletedAt
	return res
}

func (s *productSchema) PK(m *models.Product) sqlc.PK {
	var val any
	if m != nil {
		val = m.ID
	}
	return sqlc.PK{
		Column: clause.Column{Name: "id"},
		Value:  val,
	}
}

func (s *productSchema) SetPK(m *models.Product, val int64) {
	m.ID = val
}

func (s *productSchema) AutoIncrement() bool {
	return true
}

func (s *productSchema) SoftDeleteColumn() string {
	return "deleted_at"
}

func (s *productSchema) SoftDeleteValue() any {
	return time.Now()
}

func (s *productSchema) SetDeletedAt(m *models.Product) {
	now := time.Now()
	m.DeletedAt = &now
}
