// Code generated by sqlcli. DO NOT EDIT.
// Version: v1.0.0

package generated

import (
	"github.com/arllen133/sqlc"
	"github.com/arllen133/sqlc/clause"
	"github.com/arllen133/sqlc/examples/05_json_type/models"
	"github.com/arllen133/sqlc/field"
	json "github.com/arllen133/sqlc/field/json"
)

func init() {
	sqlc.RegisterSchema(&UserConfig)
}

// UserConfig Schema:
type userConfigSchema struct {
	ID       field.Number[int64]
	Username field.String
	Settings field.JSON[models.Settings]
}

var _ sqlc.Schema[models.UserConfig] = (*userConfigSchema)(nil)

var UserConfig = userConfigSchema{
	ID:       field.Number[int64]{}.WithColumn("id"),
	Username: field.String{}.WithColumn("username"),
	Settings: field.JSON[models.Settings]{}.WithColumn("settings"),
}

func (s *userConfigSchema) TableName() string {
	return "user_configs"
}

func (s *userConfigSchema) SelectColumns() []string {
	return []string{
		"id",
		"username",
		"settings",
	}
}

func (s *userConfigSchema) InsertRow(m *models.UserConfig) ([]string, []any) {
	var cols []string
	var vals []any
	// AutoIncrement PK: include only if explicitly set (non-zero)
	if m.ID != 0 {
		cols = append(cols, "id")
		vals = append(vals, m.ID)
	}
	cols = append(cols, "username")
	vals = append(vals, m.Username)
	cols = append(cols, "settings")
	vals = append(vals, m.Settings)
	return cols, vals
}

func (s *userConfigSchema) UpdateMap(m *models.UserConfig) map[string]any {
	res := make(map[string]any)
	res["username"] = m.Username
	res["settings"] = m.Settings
	return res
}

func (s *userConfigSchema) PK(m *models.UserConfig) sqlc.PK {
	var val any
	if m != nil {
		val = m.ID
	}
	return sqlc.PK{
		Column: clause.Column{Name: "id"},
		Value:  val,
	}
}

func (s *userConfigSchema) SetPK(m *models.UserConfig, val int64) {
	m.ID = val
}

func (s *userConfigSchema) AutoIncrement() bool {
	return true
}

func (s *userConfigSchema) SoftDeleteColumn() string {
	return ""
}

func (s *userConfigSchema) SoftDeleteValue() any {
	return nil
}

func (s *userConfigSchema) SetDeletedAt(m *models.UserConfig) {
}

// Settings is a type-safe JSON path accessor for the settings column
var Settings = struct {
	Theme         json.JSONPath
	Notifications json.JSONPath
}{
	Theme:         json.JSONPath{Column: "settings", Path: "$.theme"},
	Notifications: json.JSONPath{Column: "settings", Path: "$.notifications"},
}
