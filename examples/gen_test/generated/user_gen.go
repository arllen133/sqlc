// Code generated by orm-gen. DO NOT EDIT.
// Generated at: 2026-01-30T09:34:35+08:00

package generated

import (
	"github.com/arllen133/sqlc"
	"github.com/arllen133/sqlc/clause"
	"github.com/arllen133/sqlc/field"
	"github.com/arllen133/sqlc/examples/gen_test"
	"encoding/json"
)

// User Schema:
type userSchema struct {
	ID field.Number[int64]
	// Name: Name of the user
	Name field.String
	// Avatar: User avatar image
	Avatar field.Bytes
	// Settings: User settings JSON
	Settings field.JSON[json.RawMessage]
	CreatedAt field.Time
}

var _ sqlc.Schema[gentest.User] = (*userSchema)(nil)

var User = userSchema{
	ID: field.Number[int64]{}.WithColumn("id"),
	Name: field.String{}.WithColumn("name"),
	Avatar: field.Bytes{}.WithColumn("avatar"),
	Settings: field.JSON[json.RawMessage]{}.WithColumn("settings"),
	CreatedAt: field.Time{}.WithColumn("created_at"),
}

func (s *userSchema) TableName() string {
	return "users"
}

func (s *userSchema) SelectColumns() []string {
	return []string{
		"id",
		"name",
		"avatar",
		"settings",
		"created_at",
	}
}

func (s *userSchema) InsertRow(m *gentest.User) ([]string, []any) {
	var cols []string
	var vals []any
	// AutoIncrement PK: include only if explicitly set (non-zero)
	if m.ID != 0 {
		cols = append(cols, "id")
		vals = append(vals, m.ID)
	}
	cols = append(cols, "name")
	vals = append(vals, m.Name)
	cols = append(cols, "avatar")
	vals = append(vals, m.Avatar)
	cols = append(cols, "settings")
	vals = append(vals, m.Settings)
	cols = append(cols, "created_at")
	vals = append(vals, m.CreatedAt)
	return cols, vals
}

func (s *userSchema) UpdateMap(m *gentest.User) map[string]any {
	res := make(map[string]any)
	res["name"] = m.Name
	res["avatar"] = m.Avatar
	res["settings"] = m.Settings
	res["created_at"] = m.CreatedAt
	return res
}

func (s *userSchema) PK(m *gentest.User) sqlc.PK {
	var val any
	if m != nil {
		val = m.ID
	}
	return sqlc.PK{
		Column: clause.Column{Name: "id"},
		Value:  val,
	}
}

func (s *userSchema) SetPK(m *gentest.User, val int64) {
	m.ID = val
}

func (s *userSchema) AutoIncrement() bool {
	return true
}

func init(){
	sqlc.RegisterSchema(&User)
}
