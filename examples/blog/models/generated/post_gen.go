// Code generated by sqlcli. DO NOT EDIT.
// Generated at: 2026-02-03T13:30:08+08:00

package generated

import (
	"github.com/arllen133/sqlc"
	"github.com/arllen133/sqlc/clause"
	"github.com/arllen133/sqlc/field"
	json "github.com/arllen133/sqlc/field/json"
	"github.com/arllen133/sqlc/examples/blog/models"
	
)

func init(){
	sqlc.RegisterSchema(&Post)
}

// Post Schema:
type postSchema struct {
	ID field.Number[int64]
	UserID field.Number[int64]
	Title field.String
	Content field.String
	// Metadata: JSON field with type:json tag
	Metadata field.JSON[models.PostMetadata]
	CreatedAt field.Time
	UpdatedAt field.Time
}

var _ sqlc.Schema[models.Post] = (*postSchema)(nil)

var Post = postSchema{
	ID: field.Number[int64]{}.WithColumn("id"),
	UserID: field.Number[int64]{}.WithColumn("user_id"),
	Title: field.String{}.WithColumn("title"),
	Content: field.String{}.WithColumn("content"),
	Metadata: field.JSON[models.PostMetadata]{}.WithColumn("metadata"),
	CreatedAt: field.Time{}.WithColumn("created_at"),
	UpdatedAt: field.Time{}.WithColumn("updated_at"),
}

func (s *postSchema) TableName() string {
	return "posts"
}

func (s *postSchema) SelectColumns() []string {
	return []string{
		"id",
		"user_id",
		"title",
		"content",
		"metadata",
		"created_at",
		"updated_at",
	}
}

func (s *postSchema) InsertRow(m *models.Post) ([]string, []any) {
	var cols []string
	var vals []any
	// AutoIncrement PK: include only if explicitly set (non-zero)
	if m.ID != 0 {
		cols = append(cols, "id")
		vals = append(vals, m.ID)
	}
	cols = append(cols, "user_id")
	vals = append(vals, m.UserID)
	cols = append(cols, "title")
	vals = append(vals, m.Title)
	cols = append(cols, "content")
	vals = append(vals, m.Content)
	cols = append(cols, "metadata")
	vals = append(vals, m.Metadata)
	cols = append(cols, "created_at")
	vals = append(vals, m.CreatedAt)
	cols = append(cols, "updated_at")
	vals = append(vals, m.UpdatedAt)
	return cols, vals
}

func (s *postSchema) UpdateMap(m *models.Post) map[string]any {
	res := make(map[string]any)
	res["user_id"] = m.UserID
	res["title"] = m.Title
	res["content"] = m.Content
	res["metadata"] = m.Metadata
	res["created_at"] = m.CreatedAt
	res["updated_at"] = m.UpdatedAt
	return res
}

func (s *postSchema) PK(m *models.Post) sqlc.PK {
	var val any
	if m != nil {
		val = m.ID
	}
	return sqlc.PK{
		Column: clause.Column{Name: "id"},
		Value:  val,
	}
}

func (s *postSchema) SetPK(m *models.Post, val int64) {
	m.ID = val
}

func (s *postSchema) AutoIncrement() bool {
	return true
}

// PostMetadata is a type-safe JSON path accessor for the metadata column
var PostMetadata = struct {
	ViewCount json.JSONPath
	LikeCount json.JSONPath
	Tags json.JSONPath
	IsFeatured json.JSONPath
	CategoryName json.JSONPath
}{
	ViewCount: json.JSONPath{Column: "metadata", Path: "$.view_count"},
	LikeCount: json.JSONPath{Column: "metadata", Path: "$.like_count"},
	Tags: json.JSONPath{Column: "metadata", Path: "$.tags"},
	IsFeatured: json.JSONPath{Column: "metadata", Path: "$.is_featured"},
	CategoryName: json.JSONPath{Column: "metadata", Path: "$.category_name"},
}

// Post_Author defines belongsTo relation: Post has one User
var Post_Author = sqlc.HasOne(
	
	clause.Column{Name: "id"},
	clause.Column{Name: "user_id"},
	func(p *models.Post, child *models.User) { p.Author = child },
	func(p *models.Post) any { return p.UserID },
	
)

